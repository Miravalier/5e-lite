<form class="flexcol {{cssClass}}" autocomplete="off">
    {{!-- Sheet Header --}}
    <header class="sheet-header">
        <img class="profile-img" src="{{actor.img}}" data-edit="img" title="{{actor.name}}" height="100" width="100" />
        <div>
            <label>{{actor.type}}</label>
            <h1 class="charname"><input name="name" type="text" value="{{actor.name}}" placeholder="Name" /></h1>
        </div>
    </header>

    {{!-- Sheet Tab Navigation --}}
    <nav class="sheet-tabs tabs" data-group="primary">
        <a class="item" data-tab="identity_tab">Identity</a>
        {{#if data.ready}}
        <a class="item" data-tab="stats_tab">Stats</a>
        <a class="item" data-tab="skills_tab">Skills</a>
        <a class="item" data-tab="items_tab">Items and Abilities</a>
        {{else}}
            {{#if isNPC}}
            <a class="item" data-tab="stats_tab">Stats</a>
            <a class="item" data-tab="skills_tab">Skills</a>
            <a class="item" data-tab="items_tab">Items and Abilities</a>
            {{/if}}
        {{/if}}
    </nav>

    {{!-- Sheet Body --}}
    <section class="sheet-body">

        {{!-- Stats Tab --}}
        <div class="tab" data-group="primary" data-tab="stats_tab">
            <div class="attribute-group box scores">
                <span>Ability Scores</span>
                <div class="attribute">
                    <a class="ability-check" data-stat="Strength"><i class="fas fa-dice-d20"></i></a>
                    <label>Strength</label>
                    <input type="number" name="data.strength" value="{{data.strength}}"/>
                </div>
                <div class="attribute">
                    <a class="ability-check" data-stat="Dexterity"><i class="fas fa-dice-d20"></i></a>
                    <label>Dexterity</label>
                    <input type="number" name="data.dexterity" value="{{data.dexterity}}"/>
                </div>
                <div class="attribute">
                    <a class="ability-check" data-stat="Constitution"><i class="fas fa-dice-d20"></i></a>
                    <label>Constitution</label>
                    <input type="number" name="data.constitution" value="{{data.constitution}}"/>
                </div>
                <div class="attribute">
                    <a class="ability-check" data-stat="Intelligence"><i class="fas fa-dice-d20"></i></a>
                    <label>Intelligence</label>
                    <input type="number" name="data.intelligence" value="{{data.intelligence}}"/>
                </div>
                <div class="attribute">
                    <a class="ability-check" data-stat="Wisdom"><i class="fas fa-dice-d20"></i></a>
                    <label>Wisdom</label>
                    <input type="number" name="data.wisdom" value="{{data.wisdom}}"/>
                </div>
                <div class="attribute">
                    <a class="ability-check" data-stat="Charisma"><i class="fas fa-dice-d20"></i></a>
                    <label>Charisma</label>
                    <input type="number" name="data.charisma" value="{{data.charisma}}"/>
                </div>
            </div>

            <div class="attribute-group box combat">
                <span>Combat Stats</span>
                <div class="attribute">
                    <label>Armor Class</label>
                    <input type="number" name="data.ac" value="{{data.ac}}"/>
                </div>
                <div class="attribute">
                    <a class="initiative-check"><i class="fas fa-dice-d20"></i></a>
                    <label>Initiative</label>
                    <input type="number" name="data.initiative" value="{{data.initiative}}"/>
                </div>
                <div class="attribute">
                    <label>Speed</label>
                    <input type="number" name="data.speed" value="{{data.speed}}"/>
                </div>
                {{#if isNPC}}
                <div class="attribute">
                    <label>Climbing Speed</label>
                    <input type="number" name="data.climbing_speed" value="{{data.climbing_speed}}"/>
                </div>
                <div class="attribute">
                    <label>Swimming Speed</label>
                    <input type="number" name="data.swimming_speed" value="{{data.swimming_speed}}"/>
                </div>
                <div class="attribute">
                    <label>Flying Speed</label>
                    <input type="number" name="data.flying_speed" value="{{data.flying_speed}}"/>
                </div>
                {{else}}
                    {{#if data.climbing_speed}}
                    <div class="attribute">
                        <label>Climbing Speed</label>
                        <input type="number" name="data.climbing_speed" value="{{data.climbing_speed}}"/>
                    </div>
                    {{/if}}
                    {{#if data.swimming_speed}}
                    <div class="attribute">
                        <label>Swimming Speed</label>
                        <input type="number" name="data.swimming_speed" value="{{data.swimming_speed}}"/>
                    </div>
                    {{/if}}
                    {{#if data.flying_speed}}
                    <div class="attribute">
                        <label>Flying Speed</label>
                        <input type="number" name="data.flying_speed" value="{{data.flying_speed}}"/>
                    </div>
                    {{/if}}
                {{/if}}
                <div class="attribute">
                    <label>Size</label>
                    <select name="data.size">
                    {{#select data.size}}
                        <option value="Tiny">Tiny</option>
                        <option value="Small">Small</option>
                        <option value="Medium">Medium</option>
                        <option value="Large">Large</option>
                        <option value="Huge">Huge</option>
                        <option value="Gargantuan">Gargantuan</option>
                    {{/select}}
                    </select>
                </div>
                {{#if isCharacter}}
                <div class="attribute">
                    <a class="death-save"><i class="fas fa-dice-d20"></i></a>
                    <label>Death Saves</label>
                    <input type="number" name="data.death_saves_succeeded" value="{{data.death_saves_succeeded}}"/>
                    <input type="number" name="data.death_saves_failed" value="{{data.death_saves_failed}}"/>
                </div>
                {{/if}}
                {{#if isNPC}}
                <div class="attribute">
                    <label>Challenge Rating</label>
                    <select name="data.cr">
                    {{#select data.cr}}
                        <option value="0">0</option>
                        <option value="1/8">1/8</option>
                        <option value="1/4">1/4</option>
                        <option value="1/2">1/2</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                        <option value="11">11</option>
                        <option value="12">12</option>
                        <option value="13">13</option>
                        <option value="14">14</option>
                        <option value="15">15</option>
                        <option value="16">16</option>
                        <option value="17">17</option>
                        <option value="18">18</option>
                        <option value="19">19</option>
                        <option value="20">20</option>
                    {{/select}}
                    </select>
                </div>
                {{/if}}
            </div>

            <div class="attribute-group box hp">
                <span>HP</span>
                {{#unless isCharacter}}
                <div class="attribute">
                    <label>Formula</label>
                    <input class="formula" type="text" name="data.hp.formula" value="{{data.hp.formula}}"/>
                </div>
                {{/unless}}
                <div class="attribute">
                    <label>Current</label>
                    <input type="number" name="data.hp.value" value="{{data.hp.value}}"/>
                </div>
                <div class="attribute">
                    <label>Max</label>
                    <input type="number" name="data.hp.max" value="{{data.hp.max}}"/>
                </div>
            </div>

            <div class="attribute-group box mana">
                <span>Mana</span>
                <div class="attribute">
                    <label>Current</label>
                    <input type="number" value="{{data.mana.value}}" disabled/>
                </div>
                <div class="attribute">
                    <label>Max</label>
                    <input type="number" value="{{data.mana.max}}" disabled/>
                </div>
            </div>
        </div>

        {{!-- Items and Abilities Tab --}}
        <div class="tab" data-group="primary" data-tab="items_tab">
            <div class="attribute-group box mana">
                <span>Mana</span>
                <div class="attribute">
                    <label>Current</label>
                    <input type="number" name="data.mana.value" value="{{data.mana.value}}"/>
                </div>
                <div class="attribute">
                    <label>Max</label>
                    <input type="number" name="data.mana.max" value="{{data.mana.max}}"/>
                </div>
            </div>
            <div class="inventory">
            {{#each actor.items as |item id|}}
                {{#if data.isActive}}
                <div class="item" data-item-id="{{item._id}}">
                    {{#ifeq data.action_type "Standard"}}
                    <a class="action"><i class="fas fa-circle"></i></a>
                    {{/ifeq}}
                    {{#ifeq data.action_type "Bonus"}}
                    <a class="action"><i class="fas fa-adjust"></i></a>
                    {{/ifeq}}
                    {{#ifeq data.action_type "Free"}}
                    <a class="action"><i class="far fa-circle"></i></a>
                    {{/ifeq}}
                    {{#ifeq data.action_type "Reaction"}}
                    <a class="action"><i class="fas fa-exclamation-circle"></i></a>
                    {{/ifeq}}
                    <label>{{item.name}}</label>
                    {{#if data.cost}}
                    <a class="cast">{{data.cost}}<i class="fas fa-bolt"></i></a>
                    {{/if}}
                    <a class="use"><i class="fas fa-dice-d20"></i></a>
                    <a class="show"><i class="fas fa-comment-dots"></i></a>
                    <a class="edit"><i class="fas fa-eye"></i></a>
                    <a class="delete"><i class="fas fa-trash"></i></a>
                </div>
                {{/if}}
            {{/each}}
            {{#each actor.items as |item id|}}
                {{#if data.isConsumable}}
                <div class="item" data-item-id="{{item._id}}">
                    <a class="action"><i class="far fa-square"></i></a>
                    <label>{{item.name}}</label>
                    <a class="use"><i class="fas fa-dice-d20"></i></a>
                    <a class="show"><i class="fas fa-comment-dots"></i></a>
                    <a class="edit"><i class="fas fa-eye"></i></a>
                    <a class="delete"><i class="fas fa-trash"></i></a>
                </div>
                {{/if}}
            {{/each}}
            {{#each actor.items as |item id|}}
                {{#if data.isPassive}}
                <div class="item" data-item-id="{{item._id}}">
                    <label>{{item.name}}</label>
                    <a class="show"><i class="fas fa-comment-dots"></i></a>
                    <a class="edit"><i class="fas fa-eye"></i></a>
                    <a class="delete"><i class="fas fa-trash"></i></a>
                </div>
                {{/if}}
            {{/each}}
            {{#each actor.items as |item id|}}
                {{#if data.isMisc}}
                <div class="item" data-item-id="{{item._id}}">
                    <label>{{item.name}}</label>
                    <a class="show"><i class="fas fa-comment-dots"></i></a>
                    <a class="edit"><i class="fas fa-eye"></i></a>
                    <a class="delete"><i class="fas fa-trash"></i></a>
                </div>
                {{/if}}
            {{/each}}
            </div>
            <button class="new-item">New Item / Ability</button>
        </div>

        {{!-- Skills Tab --}}
        <div class="tab" data-group="primary" data-tab="skills_tab">
            <div class="skill-list">
            {{#each actor.data.skills as |skill key|}}
                <div class="skill" data-key="{{key}}">
                    <a class="use"><i class="fas fa-dice-d20"></i></a>
                    <input class="name" type="text" name="data.skills.{{key}}.label"
                            value="{{skill.label}}"/>
                    <select class="scaling" name="data.skills.{{key}}.stat">
                    {{#select skill.stat}}
                        <option value="None">None</option>
                        <option value="Strength">Strength</option>
                        <option value="Dexterity">Dexterity</option>
                        <option value="Constitution">Constitution</option>
                        <option value="Intelligence">Intelligence</option>
                        <option value="Wisdom">Wisdom</option>
                        <option value="Charisma">Charisma</option>
                    {{/select}}
                    </select>
                    <input class="value" type="number" name="data.skills.{{key}}.value"
                            value="{{skill.value}}"/>
                    {{#if ../isCharacter}}
                    <input class="prof" type="checkbox" name="data.skills.{{key}}.prof"
                            {{checked skill.prof}}/>
                    {{else}}
                    <a class="delete-skill"><i class="fas fa-trash"></i></a>
                    {{/if}}
                </div>
            {{/each}}
            </div>
            {{#unless isCharacter}}
            <button class="new-skill">New Skill</button>
            {{/unless}}
        </div>

        {{!-- Background Tab --}}
        <div class="tab" data-group="primary" data-tab="identity_tab">
            {{#if isCharacter}}
            <div class="background-field">
                <label>Race</label>
                {{#if data.locked_in}}
                <select name="data.race" disabled>
                {{else}}
                <select name="data.race">
                {{/if}}
                    {{#select data.race}}
                    <option value="Aarakocra">Aarakocra</option>
                    <option value="Aasimar">Aasimar</option>
                    <option value="Centaur">Centaur</option>
                    <option value="Dragonborn">Dragonborn</option>
                    <option value="Dwarf">Dwarf</option>
                    <option value="Elf">Elf</option>
                    <option value="Genasi">Genasi</option>
                    <option value="Gnome">Gnome</option>
                    <option value="Goliath">Goliath</option>
                    <option value="Half-Elf">Half-Elf</option>
                    <option value="Half-Orc">Half-Orc</option>
                    <option value="Halfling">Halfling</option>
                    <option value="Human">Human</option>
                    <option value="Leonin">Leonin</option>
                    <option value="Satyr">Satyr</option>
                    <option value="Tabaxi">Tabaxi</option>
                    <option value="Tiefling">Tiefling</option>
                    <option value="Triton">Triton</option>
                    <option value="Warforged">Warforged</option>
                    {{/select}}
                </select>
                <span class="info">{{{raceInfo}}}</span>
            </div>
            <div class="background-field">
                <label>Class</label>
                {{#if data.locked_in}}
                <select name="data.class" disabled>
                {{else}}
                <select name="data.class">
                {{/if}}
                    {{#select data.class}}
                    <option value="Artificer">Artificer</option>
                    <option value="Barbarian">Barbarian</option>
                    <option value="Bard">Bard</option>
                    <option value="Cleric">Cleric</option>
                    <option value="Druid">Druid</option>
                    <option value="Fighter">Fighter</option>
                    <option value="Monk">Monk</option>
                    <option value="Paladin">Paladin</option>
                    <option value="Ranger">Ranger</option>
                    <option value="Rogue">Rogue</option>
                    <option value="Sorcerer">Sorcerer</option>
                    <option value="Warlock">Warlock</option>
                    <option value="Wizard">Wizard</option>
                    {{/select}}
                </select>
                <span class="info">{{{classInfo}}}</span>
            </div>
            {{/if}}
            {{#if isNPC}}
            <div class="background-field">
                <label>Race</label>
                <input type="text" name="data.race" value="{{data.race}}"/>
            </div>
            {{else}}
            {{#unless data.locked_in}}
            <button class="lock-in">Lock In Class and Race</button>
            {{/unless}}
            {{/if}}
            <div class="pronoun-field">
                <label>Subjective Pronoun (e.g. he, she, they)</label>
                <input type="text" name="data.subjective_pronoun" value="{{data.subjective_pronoun}}"/>
            </div>
            <div class="pronoun-field">
                <label>Possessive Pronoun (e.g. his, her, their)</label>
                <input type="text" name="data.possessive_pronoun" value="{{data.possessive_pronoun}}"/>
            </div>
        </div>

    </section>
</form>
